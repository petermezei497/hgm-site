{{- define "main" -}}
  {{- partial "breadcrumbs.html" . -}}

  <header class="page-header">
    <h1>{{ .Title }}</h1>
    {{- with .Description -}}
      <div class="post-description">{{ . | markdownify }}</div>
    {{- end -}}
  </header>

  {{- with .Content -}}
    <div class="post-content">
      {{- if not ($.Param "disableAnchoredHeadings") -}}
        {{- partial "anchored_headings.html" . -}}
      {{- else -}}
        {{ . }}
      {{- end -}}
    </div>
  {{- end -}}

  {{- $pages := .Pages.ByWeight -}}
  {{- $paginator := .Paginate $pages -}}

  {{- range $paginator.Pages -}}
    <article class="post-entry">
      <header class="entry-header">
        <h2><a href="{{ .RelPermalink }}">{{ .Title }}</a></h2>
      </header>

      {{- if (ne (.Param "hideSummary") true) -}}
        <div class="entry-content">
          <p>{{ .Summary | plainify | htmlUnescape }}{{ if .Truncated }}...{{ end }}</p>
        </div>
      {{- end -}}

      {{- if not (.Param "hideMeta") -}}
        <footer class="entry-footer">
          {{- partial "post_meta.html" . -}}
        </footer>
      {{- end -}}
    </article>
  {{- end -}}

  {{- if gt $paginator.TotalPages 1 -}}
    <footer class="pagination">
      {{- if $paginator.HasPrev -}}
        <a class="prev" href="{{ $paginator.Prev.URL }}">« {{ i18n "prev_page" }}</a>
      {{- end -}}
      {{- if $paginator.HasNext -}}
        <a class="next" href="{{ $paginator.Next.URL }}">{{ i18n "next_page" }} »</a>
      {{- end -}}
    </footer>
  {{- end -}}
{{- end -}}
